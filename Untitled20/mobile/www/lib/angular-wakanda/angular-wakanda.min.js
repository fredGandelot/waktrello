//angular-wakanda.min.js - v1.1.5 - 2016-08-30
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WakandaClient=e():t.WakandaClient=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n(2),n(24),n(58),n(61),n(82),n(87);var r=n(88);e.WakandaClient=r["default"];var i=n(118),o=n(93);e.CatalogBaseService=o.CatalogBaseService;var a=n(107);e.CollectionBaseService=a.CollectionBaseService;var s=n(104);e.DataClassBaseService=s.DataClassBaseService;var u=n(116);e.DirectoryBaseService=u.DirectoryBaseService;var c=n(99);e.EntityBaseService=c.EntityBaseService;var l=n(111);e.MediaBaseService=l.MediaBaseService,r["default"].HttpClient=i["default"]},function(t,e,n){n(3),t.exports=n(6).Function.bind},function(t,e,n){var r=n(4);r(r.P,"Function",{bind:n(22)})},function(t,e,n){var r=n(5),i=n(6),o=n(7),a=n(17),s=n(20),u="prototype",c=function(t,e,n){var l,f,p,d,h=t&c.F,y=t&c.G,v=t&c.S,m=t&c.P,_=t&c.B,b=y?r:v?r[e]||(r[e]={}):(r[e]||{})[u],g=y?i:i[e]||(i[e]={}),w=g[u]||(g[u]={});y&&(n=e);for(l in n)f=!h&&b&&void 0!==b[l],p=(f?b:n)[l],d=_&&f?s(p,r):m&&"function"==typeof p?s(Function.call,p):p,b&&a(b,l,p,t&c.U),g[l]!=p&&o(g,l,d),m&&w[l]!=p&&(w[l]=p)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(8),i=n(16);t.exports=n(12)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(9),i=n(11),o=n(15),a=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(10);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(12)&&!n(13)(function(){return 7!=Object.defineProperty(n(14)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(10),i=n(5).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(10);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(5),i=n(7),o=n(18),a=n(19)("src"),s="toString",u=Function[s],c=(""+u).split(s);n(6).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||i(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||u.call(this)})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(21);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(21),i=n(10),o=n(23),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){n(25),n(51),t.exports=n(6).Array.from},function(t,e,n){"use strict";var r=n(26)(!0);n(29)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(27),i=n(28);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(30),i=n(4),o=n(17),a=n(7),s=n(18),u=n(31),c=n(32),l=n(47),f=n(49),p=n(48)("iterator"),d=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",v="values",m=function(){return this};t.exports=function(t,e,n,_,b,g,w){c(n,e,_);var C,S,k,E=function(t){if(!d&&t in P)return P[t];switch(t){case y:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},$=e+" Iterator",O=b==v,j=!1,P=t.prototype,T=P[p]||P[h]||b&&P[b],x=T||E(b),M=b?O?E("entries"):x:void 0,N="Array"==e?P.entries||T:T;if(N&&(k=f(N.call(new t)),k!==Object.prototype&&(l(k,$,!0),r||s(k,p)||a(k,p,m))),O&&T&&T.name!==v&&(j=!0,x=function(){return T.call(this)}),r&&!w||!d&&!j&&P[p]||a(P,p,x),u[e]=x,u[$]=m,b)if(C={values:O?x:E(v),keys:g?x:E(y),entries:M},w)for(S in C)S in P||o(P,S,C[S]);else i(i.P+i.F*(d||j),e,C);return C}},function(t,e){t.exports=!1},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(33),i=n(16),o=n(47),a={};n(7)(a,n(48)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(9),i=n(34),o=n(45),a=n(43)("IE_PROTO"),s=function(){},u="prototype",c=function(){var t,e=n(14)("iframe"),r=o.length,i="<",a=">";for(e.style.display="none",n(46).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),c=t.F;r--;)delete c[u][o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[u]=r(t),n=new s,s[u]=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(8),i=n(9),o=n(35);t.exports=n(12)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(36),i=n(45);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(18),i=n(37),o=n(40)(!1),a=n(43)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(38),i=n(28);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(39);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(37),i=n(41),o=n(42);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(27),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(27),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(44)("keys"),i=n(19);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(5),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){t.exports=n(5).document&&document.documentElement},function(t,e,n){var r=n(8).f,i=n(18),o=n(48)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(44)("wks"),i=n(19),o=n(5).Symbol,a="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=r},function(t,e,n){var r=n(18),i=n(50),o=n(43)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(28);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(20),i=n(4),o=n(50),a=n(52),s=n(53),u=n(41),c=n(54),l=n(55);i(i.S+i.F*!n(57)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,p=o(t),d="function"==typeof this?this:Array,h=arguments.length,y=h>1?arguments[1]:void 0,v=void 0!==y,m=0,_=l(p);if(v&&(y=r(y,h>2?arguments[2]:void 0,2)),void 0==_||d==Array&&s(_))for(e=u(p.length),n=new d(e);e>m;m++)c(n,m,v?y(p[m],m):p[m]);else for(f=_.call(p),n=new d;!(i=f.next()).done;m++)c(n,m,v?a(f,y,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){var r=n(9);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(31),i=n(48)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(8),i=n(16);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(56),i=n(48)("iterator"),o=n(31);t.exports=n(6).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(39),i=n(48)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(48)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(s){}return n}},function(t,e,n){n(59),t.exports=n(6).Array.isArray},function(t,e,n){var r=n(4);r(r.S,"Array",{isArray:n(60)})},function(t,e,n){var r=n(39);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){n(62),n(25),n(63),n(67),n(79),t.exports=n(6).Map},function(t,e,n){"use strict";var r=n(56),i={};i[n(48)("toStringTag")]="z",i+""!="[object z]"&&n(17)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){for(var r=n(64),i=n(17),o=n(5),a=n(7),s=n(31),u=n(48),c=u("iterator"),l=u("toStringTag"),f=s.Array,p=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var h,y=p[d],v=o[y],m=v&&v.prototype;if(m){m[c]||a(m,c,f),m[l]||a(m,l,y),s[y]=f;for(h in r)m[h]||i(m,h,r[h],!0)}}},function(t,e,n){"use strict";var r=n(65),i=n(66),o=n(31),a=n(37);t.exports=n(29)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(48)("unscopables"),i=Array.prototype;void 0==i[r]&&n(7)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(68);t.exports=n(74)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(8).f,i=n(33),o=n(69),a=n(20),s=n(70),u=n(28),c=n(71),l=n(29),f=n(66),p=n(72),d=n(12),h=n(73).fastKey,y=d?"_s":"size",v=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var f=t(function(t,r){s(t,f,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[y]=0,void 0!=r&&c(r,n,t[l],t)});return o(f.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[y]=0},"delete":function(t){var e=this,n=v(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[y]--}return!!n},forEach:function(t){s(this,f,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!v(this,t)}}),d&&r(f.prototype,"size",{get:function(){return u(this[y])}}),f},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[y]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){l(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),p(e)}}},function(t,e,n){var r=n(17);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(20),i=n(52),o=n(53),a=n(9),s=n(41),u=n(55),c={},l={},e=t.exports=function(t,e,n,f,p){var d,h,y,v,m=p?function(){return t}:u(t),_=r(n,f,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=s(t.length);d>b;b++)if(v=e?_(a(h=t[b])[0],h[1]):_(t[b]),v===c||v===l)return v}else for(y=m.call(t);!(h=y.next()).done;)if(v=i(y,_,h.value,e),v===c||v===l)return v};e.BREAK=c,e.RETURN=l},function(t,e,n){"use strict";var r=n(5),i=n(8),o=n(12),a=n(48)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(19)("meta"),i=n(10),o=n(18),a=n(8).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(13)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},p=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},function(t,e,n){"use strict";var r=n(5),i=n(4),o=n(17),a=n(69),s=n(73),u=n(71),c=n(70),l=n(10),f=n(13),p=n(57),d=n(47),h=n(75);t.exports=function(t,e,n,y,v,m){var _=r[t],b=_,g=v?"set":"add",w=b&&b.prototype,C={},S=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(m||w.forEach&&!f(function(){(new b).entries().next()}))){var k=new b,E=k[g](m?{}:-0,1)!=k,$=f(function(){k.has(1)}),O=p(function(t){new b(t)}),j=!m&&f(function(){for(var t=new b,e=5;e--;)t[g](e,e);return!t.has(-0)});O||(b=e(function(e,n){c(e,b,t);var r=h(new _,e,b);return void 0!=n&&u(n,v,r[g],r),r}),b.prototype=w,w.constructor=b),($||j)&&(S("delete"),S("has"),v&&S("get")),(j||E)&&S(g),m&&w.clear&&delete w.clear}else b=y.getConstructor(e,t,v,g),a(b.prototype,n),s.NEED=!0;return d(b,t),C[t]=b,i(i.G+i.W+i.F*(b!=_),C),m||y.setStrong(b,t,v),b}},function(t,e,n){var r=n(10),i=n(76).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){var r=n(10),i=n(9),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(20)(Function.call,n(77).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){var r=n(78),i=n(16),o=n(37),a=n(15),s=n(18),u=n(11),c=Object.getOwnPropertyDescriptor;e.f=n(12)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(4);r(r.P+r.R,"Map",{toJSON:n(80)("Map")})},function(t,e,n){var r=n(56),i=n(81);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(71);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(62),n(25),n(63),n(83),t.exports=n(6).Promise},function(t,e,n){"use strict";var r,i,o,a=n(30),s=n(5),u=n(20),c=n(56),l=n(4),f=n(10),p=n(21),d=n(70),h=n(71),y=n(84),v=n(85).set,m=n(86)(),_="Promise",b=s.TypeError,g=s.process,w=s[_],g=s.process,C="process"==c(g),S=function(){},k=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[n(48)("species")]=function(t){t(S,S)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(S)instanceof e}catch(r){}}(),E=function(t,e){return t===e||t===w&&e===o},$=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},O=function(t){return E(w,t)?new j(t):new i(t)},j=i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw b("Bad Promise constructor");e=t,n=r}),this.resolve=p(e),this.reject=p(n)},P=function(t){try{t()}catch(e){return{error:e}}},T=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&N(t),t._h=1),a===!0?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(b("Promise-chain cycle")):(o=$(n))?o.call(n,s,u):s(n)):u(r)}catch(l){u(l)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&x(t)})}},x=function(t){v.call(s,function(){var e,n,r,i=t._v;if(M(t)&&(e=P(function(){C?g.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=C||M(t)?2:1),t._a=void 0,e)throw e.error})},M=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!M(e.promise))return!1;return!0},N=function(t){v.call(s,function(){var e;C?g.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),T(e,!0))},A=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw b("Promise can't be resolved itself");(e=$(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,u(A,r,1),u(R,r,1))}catch(i){R.call(r,i)}}):(n._v=t,n._s=1,T(n,!1))}catch(r){R.call({_w:n,_d:!1},r)}}};k||(w=function(t){d(this,w,_,"_h"),p(t),r.call(this);try{t(u(A,this,1),u(R,this,1))}catch(e){R.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(69)(w.prototype,{then:function(t,e){var n=O(y(this,w));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&T(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),j=function(){var t=new r;this.promise=t,this.resolve=u(A,t,1),this.reject=u(R,t,1)}),l(l.G+l.W+l.F*!k,{Promise:w}),n(47)(w,_),n(72)(_),o=n(6)[_],l(l.S+l.F*!k,_,{reject:function(t){var e=O(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(a||!k),_,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var e=O(this),n=e.resolve;return n(t),e.promise}}),l(l.S+l.F*!(k&&n(57)(function(t){w.all(t)["catch"](S)})),_,{all:function(t){var e=this,n=O(e),r=n.resolve,i=n.reject,o=P(function(){var n=[],o=0,a=1;h(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=O(e),r=n.reject,i=P(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e,n){var r=n(9),i=n(21),o=n(48)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(20),s=n(23),u=n(46),c=n(14),l=n(5),f=l.process,p=l.setImmediate,d=l.clearImmediate,h=l.MessageChannel,y=0,v={},m="onreadystatechange",_=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},b=function(t){_.call(t.data)};p&&d||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},d=function(t){delete v[t]},"process"==n(39)(f)?r=function(t){f.nextTick(a(_,t,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r=m in c("script")?function(t){u.appendChild(c("script"))[m]=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:p,clear:d}},function(t,e,n){var r=n(5),i=n(85).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(39)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(o){throw t?n():e=void 0,o}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var p=s.resolve();n=function(){p.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e){"use strict";!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}return"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}()},function(t,e,n){"use strict";var r=n(89),i=n(114),o=n(101),a=n(112),s=n(117),u=function(){function t(e){this._httpClient=new t.HttpClient({apiPrefix:(e||"")+"/rest"});var n=new i["default"]({wakJSC:this});this.directory={login:function(t,e,r){return n.login(t,e,r)},logout:function(){return n.logout()},currentUser:function(){return n.currentUser()},currentUserBelongsTo:function(t){return n.currentUserBelongsTo(t)}},this.helper={isEntity:function(t){return t instanceof o["default"]},isCollection:function(t){return t instanceof a["default"]}}}return t.prototype.getCatalog=function(t){var e=new r["default"]({wakJSC:this});return e.get(t)},t.prototype.version=function(){return s.version},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(90),o=n(91),a=n(94),s=n(95),u=n(96),c=function(t){function e(e){t.call(this,e),this.service=new o["default"]({wakJSC:this.wakJSC})}return r(e,t),e.prototype.needDataClass=function(t){this.seenDataClasses.indexOf(t)===-1&&this.seenDataClasses.push(t)},e.prototype.get=function(t){var e=this;return this.seenDataClasses=[],this.service.get(t).then(function(t){for(var n=[],r=0,i=t;r<i.length;r++){for(var o=i[r],c=[],l=function(n){switch(n.kind){case"relatedEntity":c.push(new s.AttributeRelated({name:n.name,type:n.type,kind:n.kind})),e.needDataClass(n.type);break;case"storage":case"calculated":case"alias":var r=n.readOnly||"image"===n.type||"blob"===n.type;c.push(new s.Attribute({name:n.name,type:n.type,readOnly:r,kind:n.kind}));break;case"relatedEntities":var i;t.some(function(t){if(t.collectionName===n.type)return i=t.name,!0});var o=new s.AttributeCollection({name:n.name,type:n.type,kind:n.kind,entityType:i});c.push(o),e.needDataClass(o.entityType);break;default:throw new Error("[WakandaClient] Unhandled "+n.kind+" attribute type")}},f=0,p=o.attributes;f<p.length;f++){var d=p[f];l(d)}for(var h={entity:[],collection:[],dataClass:[]},y=0,v=o.methods;y<v.length;y++){var m=v[y];switch(m.applyTo){case"entity":h.entity.push(m.name);break;case"entityCollection":h.collection.push(m.name);break;case"dataClass":h.dataClass.push(m.name);break;default:throw new Error("[WakandaClient] Unrecognized "+m.applyTo+" method type")}}var _=new s.DataClass({name:o.name,collectionName:o.collectionName,attributes:c,methods:h}),b=new u["default"]({wakJSC:e.wakJSC,dataClass:_,methods:h});b._decorateDataClass(),n.push(_)}for(var g=new a["default"]({dataClasses:n}),w=0,C=e.seenDataClasses;w<C.length;w++){var S=C[w];if(!g[S])throw new Error("Needed "+S+" dataClass is not present on catalog")}return g})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c},function(t,e){"use strict";var n=function(){function t(t){var e=t.wakJSC;this.wakJSC=e}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(92),o=n(93),a=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.get=function(t){return o.CatalogBaseService.get({httpClient:this.httpClient,dataClasses:t})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a},function(t,e){"use strict";var n=function(){function t(t){var e=t.wakJSC;this.wakJSC=e,this.httpClient=e._httpClient}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";var n=function(){function t(){}return t.get=function(t){var e=t.httpClient,n=t.dataClasses,r="/";if(Array.isArray(n))r+=n.join();else{if("undefined"!=typeof n)throw new Error("Catalog.get: first parameter should be an array");r+="$all"}return e.get({uri:"/$catalog"+r}).then(function(t){var e=[],n=JSON.parse(t.body);if(n.dataClasses)for(var r=0,i=n.dataClasses;r<i.length;r++){var o=i[r],a=[];if(o.attributes)for(var s=0,u=o.attributes;s<u.length;s++){var c=u[s];a.push({name:c.name,kind:c.kind,type:c.type,readOnly:c.readOnly})}var l=[];if(o.methods)for(var f=0,p=o.methods;f<p.length;f++){var d=p[f];l.push({name:d.name,applyTo:d.applyTo})}e.push({name:o.name,collectionName:o.collectionName,attributes:a,methods:l})}return e})},t}();e.CatalogBaseService=n},function(t,e){"use strict";var n=function(){function t(t){for(var e=t.dataClasses,n=0,r=e;n<r.length;n++){var i=r[n];this[i.name]=i}}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(){function t(t){var e=t.name,n=t.collectionName,r=t.attributes,i=t.methods;this.name=e,this.collectionName=n,this.attributes=r,this.methods=i}return t}();e.DataClass=r;var i=function(){function t(t){var e=t.name,n=t.type,r=t.readOnly,i=t.kind;this.name=e,this.type=n,this.readOnly=r===!0,this.kind=i}return t}();e.Attribute=i;var o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(i);e.AttributeRelated=o;var a=function(t){function e(e){var n=e.name,r=e.type,i=e.readOnly,o=e.kind,a=e.entityType;t.call(this,{name:n,type:r,readOnly:i,kind:o}),this.entityType=a}return n(e,t),e}(i);e.AttributeCollection=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(90),o=n(97),a=n(103),s=n(105),u=n(109),c=n(101),l=n(112),f=n(95),p=n(113),d=n(108),h=n(102),y=new Map,v=function(t){function e(e){var n=e.wakJSC,r=e.dataClass,i=e.methods;t.call(this,{wakJSC:n}),this.dataClass=r,this.methods=i,this.service=new a["default"]({wakJSC:this.wakJSC,dataClass:r}),y.set(r.name,this),this._dataClassBusinessMap=y}return r(e,t),e.prototype._decorateDataClass=function(){this.dataClass.find=this.find.bind(this),this.dataClass.query=this.query.bind(this),this.dataClass.create=this.create.bind(this),this._addUserDefinedMethods()},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.methods.dataClass.forEach(function(n){t.dataClass[n]=function(){var t=Array.from(arguments);return e.callMethod(n,t)}})},e.prototype.callMethod=function(t,e){var n=this;return this.service.callMethod(t,e).then(function(t){return h.MethodAdapter.transform(t,n._dataClassBusinessMap)})},e.prototype.find=function(t,e){var n=this,r=e||{};if(void 0!==r.filter||void 0!==r.params||void 0!==r.pageSize||void 0!==r.start||void 0!==r.orderBy)throw new Error("Dataclass.find: options filter, params, pageSize, start and orderBy are not allowed");return this.service.find(t,r).then(function(t){return n._presentationEntityFromDbo({dbo:t})})},e.prototype.query=function(t){var e=this,n=t||{},r=n.select;if(n.method&&n.method.length>0)throw new Error("Dataclass.query: option method is not allowed");return n.pageSize||(n.pageSize=d["default"].DEFAULT_PAGE_SIZE),this.service.query(n).then(function(t){return e._presentationCollectionFromDbo({dbo:t,pageSize:n.pageSize,initialSelect:r})})},e.prototype.create=function(t){var e={};if(t)for(var n in t)t[n]instanceof c["default"]&&(e[n]=t[n],delete t[n]);var r=this._presentationEntityFromDbo({dbo:t||{}});for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},e.prototype._createEntity=function(t){var e=t.key,n=t.deferred,r=new c["default"]({key:e,deferred:n,dataClass:this.dataClass}),i=new o["default"]({wakJSC:this.wakJSC,dataClass:this.dataClass,entity:r,dataClassBusiness:this});return i._decorateEntity(),r},e.prototype._createCollection=function(t){var e=t.uri,n=t.deferred,r=t.pageSize,i=t.initialSelect,o=new l["default"]({deferred:n,dataClass:this.dataClass}),a=new s["default"]({wakJSC:this.wakJSC,dataClass:this.dataClass,dataClassBusiness:this,collection:o,collectionUri:e,pageSize:r,initialSelect:i});return a._decorateCollection(),o},e.prototype._createMedia=function(t){var e=t.uri,n=t.isImage,r=t.attributeName,i=t.entity,o=new p["default"]({uri:e}),a=new u["default"]({
wakJSC:this.wakJSC,media:o,dataClassBusiness:this,isImage:n,attributeName:r,entity:i});return a._decorateMedia(),o},e.prototype._presentationEntityFromDbo=function(t){var e,n=t.dbo;if(n||(e=null),n.__deferred)e=this._createEntity({key:n.__deferred.__KEY,deferred:!0});else{e=this._createEntity({key:n.__KEY}),e._stamp=n.__STAMP;for(var r=0,i=this.dataClass.attributes;r<i.length;r++){var o=i[r],a=n[o.name];if(null!==a&&void 0!==a)if(o instanceof f.AttributeRelated){var s=y.get(o.type);e[o.name]=s._presentationEntityFromDbo({dbo:a})}else if(o instanceof f.AttributeCollection){var s=y.get(o.entityType);e[o.name]=s._presentationCollectionFromDbo({dbo:a})}else if("image"===o.type||"blob"===o.type){var u=void 0;u=a&&a.__deferred&&a.__deferred.uri?a.__deferred.uri:null,e[o.name]=this._createMedia({uri:u,isImage:"image"===o.type,attributeName:o.name,entity:e})}else e[o.name]=a;else"image"===o.type||"blob"===o.type?e[o.name]=this._createMedia({uri:null,isImage:"image"===o.type,attributeName:o.name,entity:e}):e[o.name]=null}}return e},e.prototype._presentationCollectionFromDbo=function(t){var e,n=t.dbo,r=t.pageSize,i=t.initialSelect;if(n)if(n.__deferred)e=this._createCollection({deferred:!0,uri:n.__deferred.uri});else{e=this._createCollection({uri:n.__ENTITYSET,pageSize:r||n.__ENTITIES.length,initialSelect:i}),e._count=n.__COUNT,e._first=n.__FIRST,e._sent=n.__SENT,e._pageSize=r;for(var o=0,a=n.__ENTITIES;o<a.length;o++){var s=a[o];e.entities.push(this._presentationEntityFromDbo({dbo:s}))}}else e=null;return e},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=v},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(90),o=n(98),a=n(95),s=n(101),u=n(102),c=function(t){function e(e){var n=e.wakJSC,r=e.entity,i=e.dataClass,a=e.dataClassBusiness;t.call(this,{wakJSC:n}),this.entity=r,this.dataClass=i,this.dataClassBusiness=a,this.service=new o["default"]({wakJSC:n,entity:r,dataClass:i})}return r(e,t),e.prototype._decorateEntity=function(){this.entity.save=this.save.bind(this),this.entity["delete"]=this["delete"].bind(this),this.entity.fetch=this.fetch.bind(this),this.entity.recompute=this.recompute.bind(this),this._addUserDefinedMethods()},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.entity.forEach(function(n){t.entity[n]=function(){var t=Array.from(arguments);return e.callMethod(n,t)}})},e.prototype.fetch=function(t){var e=this,n=t||{};if(void 0!==n.filter||void 0!==n.params||void 0!==n.pageSize||void 0!==n.start||void 0!==n.orderBy)throw new Error("Entity.fetch: options filter, params, pageSize, start and orderBy are not allowed");return this.dataClassBusiness.find(this.entity._key,t).then(function(t){return e._refreshEntity({fresherEntity:t}),e.entity})},e.prototype.callMethod=function(t,e){var n=this;if(!this.entity._key)throw new Error("Entity."+t+": can not be called on an unsaved entity");return this.service.callMethod(t,e).then(function(t){return u.MethodAdapter.transform(t,n.dataClassBusiness._dataClassBusinessMap)})},e.prototype["delete"]=function(){var t=this;if(!this.entity._key)throw new Error("Entity.delete: can not delete unsaved entity");return this.service["delete"]().then(function(){t.entity=null})},e.prototype.save=function(){var t=this,e=this.prepareDataForSave(),n=this._getExpandString();return this.service.save(e,n).then(function(e){var n=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:n}),t.entity})},e.prototype.recompute=function(){var t=this,e=this.prepareDataForSave();return this.service.recompute(e).then(function(e){var n=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:n}),t.entity})},e.prototype.prepareDataForSave=function(){var t={},e=!1;this.entity._key&&this.entity._stamp?(t.__KEY=this.entity._key,t.__STAMP=this.entity._stamp):e=!0;for(var n=0,r=this.dataClass.attributes;n<r.length;n++){var i=r[n],o=this.entity[i.name];void 0===o&&(o=null),i instanceof a.AttributeRelated?t[i.name]=o?o._key:null:i instanceof a.AttributeCollection||i.readOnly||e&&null===o&&"ID"!==i.name||(t[i.name]=o)}return t},e.prototype._refreshEntity=function(t){var e=t.fresherEntity;for(var n in e)e.hasOwnProperty(n)&&"function"!=typeof e[n]&&(this.entity[n]=e[n])},e.prototype._getExpandString=function(){for(var t="",e=0,n=this.dataClass.attributes;e<n.length;e++){var r=n[e];(r instanceof a.AttributeRelated||r instanceof a.AttributeCollection)&&this.entity[r.name]instanceof s["default"]&&(t+=r.name+",")}return t.length>0?t.slice(0,-1):null},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(92),o=n(99),a=function(t){function e(e){var n=e.wakJSC,r=e.entity,i=e.dataClass;t.call(this,{wakJSC:n}),this.entity=r,this.dataClass=i}return r(e,t),e.prototype.save=function(t,e){return o.EntityBaseService.save({httpClient:this.httpClient,dataClassName:this.dataClass.name,expand:e,data:t})},e.prototype.recompute=function(t){return o.EntityBaseService.recompute({httpClient:this.httpClient,dataClassName:this.dataClass.name,data:t})},e.prototype.callMethod=function(t,e){return o.EntityBaseService.callMethod({httpClient:this.httpClient,dataClassName:this.dataClass.name,methodName:t,parameters:e,entityKey:this.entity._key})},e.prototype["delete"]=function(){return o.EntityBaseService["delete"]({httpClient:this.httpClient,dataClassName:this.dataClass.name,entityKey:this.entity._key})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a},function(t,e,n){"use strict";var r=n(100),i=function(){function t(){}return t.save=function(t){var e=t.httpClient,n=t.data,i=t.expand,o=t.dataClassName,a="";return i&&(a="&$expand="+i),e.post({uri:"/"+o+"?$method=update"+a,data:n}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,r["default"].removeRestInfoFromEntity(e),e})},t.recompute=function(t){var e=t.httpClient,n=t.dataClassName,i=t.data;return e.post({uri:"/"+n+"?$method=update&$refresh=true",data:i}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,r["default"].removeRestInfoFromEntity(e),e})},t.callMethod=function(t){var e=t.httpClient,n=t.dataClassName,r=t.methodName,i=t.parameters,o=t.entityKey;return e.post({uri:"/"+n+"("+o+")/"+r,data:i}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t["delete"]=function(t){var e=t.httpClient,n=t.dataClassName,r=t.entityKey;return e.post({uri:"/"+n+"("+r+")?$method=delete"}).then(function(t){var e=JSON.parse(t.body);return!(!e||e.ok!==!0)||Promise.reject(new Error)})},t}();e.EntityBaseService=i},function(t,e){"use strict";var n=function(){function t(){}return t.handleOptions=function(t){if(!t)return"";var e=t.select,n=t.filter,r=t.params,i=t.pageSize,o=t.start,a=t.orderBy,s=t.method,u=t.emMethod,c="?";if(e&&(c+="&$expand="+e),n&&(c+='&$filter="'+n+'"'),a&&(c+="&$orderby="+a),r){if(!Array.isArray(r))throw new Error("params option must be an array");if(r.length>0){for(var l="[",f=0,p=r;f<p.length;f++){var d=p[f];l+="string"==typeof d?'"'+d+'",':d+","}l=l.slice(0,-1),l+="]",c+="&$params='"+l+"'"}}if(i){if(!this.isInteger(i))throw new Error("pageSize option must be an integer");c+="&$limit="+i}if(o){if(!this.isInteger(o))throw new Error("start option must be an integer");c+="&$skip="+o}return s&&(c+="&$method="+s),u&&(c+="&$emMethod="+u),c.length>1&&"&"===c[1]&&(c=c.replace("?&","?")),"?"===c?"":c},t.isInteger=function(t){return"number"==typeof t&&!isNaN(t)&&t%1===0},t.removeRestInfoFromEntity=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];n&&n.__deferred&&n.__deferred.__KEY&&delete n.__deferred.uri}},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";var n=function(){function t(t){var e=t.key,n=t.deferred,r=t.dataClass;this._key=e,this._deferred=n===!0,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:r})}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";var n=function(){function t(){}return t.transform=function(t,e){if(t&&t.__entityModel){var n=e.get(t.__entityModel);if(n){if("undefined"!=typeof t.__COUNT&&"undefined"!=typeof t.__ENTITIES&&"undefined"!=typeof t.__FIRST&&"undefined"!=typeof t.__SENT)return n._presentationCollectionFromDbo({dbo:t});if(t.__KEY&&t.__STAMP)return n._presentationEntityFromDbo({dbo:t})}}return t},t}();e.MethodAdapter=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(92),o=n(104),a=function(t){function e(e){var n=e.wakJSC,r=e.dataClass;t.call(this,{wakJSC:n}),this.dataClass=r}return r(e,t),e.prototype.find=function(t,e){return o.DataClassBaseService.find({httpClient:this.httpClient,key:t,options:e,dataClassName:this.dataClass.name})},e.prototype.query=function(t){return o.DataClassBaseService.query({httpClient:this.httpClient,options:t,dataClassName:this.dataClass.name})},e.prototype.callMethod=function(t,e){return o.DataClassBaseService.callMethod({httpClient:this.httpClient,dataClassName:this.dataClass.name,methodName:t,parameters:e})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a},function(t,e,n){"use strict";var r=n(100),i=function(){function t(){}return t.find=function(t){var e=t.httpClient,n=t.key,i=t.options,o=t.dataClassName;if("string"!=typeof n&&"number"!=typeof n)throw new Error("DataClass.find: Invalid id type");var a=r["default"].handleOptions(i);return e.get({uri:"/"+o+"("+n+")"+a}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,r["default"].removeRestInfoFromEntity(e),e})},t.query=function(t){var e=t.httpClient,n=t.options,i=t.dataClassName;n.method="entityset",Array.isArray(n.params)&&(n.params=this._sanitizeOptionParams(n.params));var o=r["default"].handleOptions(n);return e.get({uri:"/"+i+o}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var n=0,i=e.__ENTITIES;n<i.length;n++){var o=i[n];r["default"].removeRestInfoFromEntity(o)}return e})},t.callMethod=function(t){var e=t.httpClient,n=t.methodName,r=t.parameters,i=t.dataClassName;return e.post({uri:"/"+i+"/"+n,data:r}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t._sanitizeOptionParams=function(t){return t.map(function(t){return t instanceof Date?t.toISOString():t})},t}();e.DataClassBaseService=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(90),o=n(106),a=n(108),s=n(102),u=function(t){function e(e){var n=e.wakJSC,r=e.dataClass,i=e.collection,a=e.dataClassBusiness,s=e.collectionUri,u=e.pageSize,c=e.initialSelect;t.call(this,{wakJSC:n}),this.collection=i,this.dataClass=r,this.dataClassBusiness=a,this.service=new o["default"]({wakJSC:n,collection:i,dataClass:r,collectionUri:s}),this.pageSize=u,this.initialSelect=c}return r(e,t),e.prototype._decorateCollection=function(){this.collection.fetch=this.fetch.bind(this),this.collection.nextPage=this.nextPage.bind(this),this.collection.prevPage=this.prevPage.bind(this),this.collection.more=this.more.bind(this),this._addUserDefinedMethods()},e.prototype.fetch=function(t){var e=this,n=t||{};if(n.method&&n.method.length>0)throw new Error("Collection.fetch: option method is not allowed");return n.pageSize||(n.pageSize=this.pageSize?this.pageSize:a["default"].DEFAULT_PAGE_SIZE),n.select&&(this.initialSelect=n.select),this.pageSize=n.pageSize,this.service.fetch(n).then(function(t){var n=e.dataClassBusiness._presentationCollectionFromDbo({dbo:t,pageSize:e.pageSize});return e._refreshCollection({fresherCollection:n}),e.collection})},e.prototype.more=function(){var t=this;if(this.collection._deferred===!0)throw new Error("Collection.more: can not call more on a deferred collection");var e={start:this.collection._first+this.collection._sent,pageSize:this.pageSize};return this.initialSelect&&(e.select=this.initialSelect),this.service.fetch(e).then(function(e){t.collection._sent+=e.__ENTITIES.length;for(var n=0,r=e.__ENTITIES;n<r.length;n++){var i=r[n];t.collection.entities.push(t.dataClassBusiness._presentationEntityFromDbo({dbo:i}))}return t.collection})},e.prototype.nextPage=function(){if(this.collection._deferred===!0)throw new Error("Collection.nextPage: can not call nextPage on a deferred collection");var t={start:this.collection._first+this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype.prevPage=function(){if(this.collection._deferred===!0)throw new Error("Collection.prevPage: can not call prevPage on a deferred collection");var t={start:this.collection._first-this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.collection.forEach(function(n){t.collection[n]=function(){var t=Array.from(arguments);return e.callMethod(n,t)}})},e.prototype.callMethod=function(t,e){var n=this;if(this.collection._deferred)throw new Error("Collection."+t+": can not be called on a deferred collection");return this.service.callMethod(t,e).then(function(t){return s.MethodAdapter.transform(t,n.dataClassBusiness._dataClassBusinessMap)})},e.prototype._refreshCollection=function(t){var e=t.fresherCollection;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&"function"!=typeof e[n]&&(this.collection[n]=e[n])},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(92),o=n(107),a=function(t){function e(e){var n=e.wakJSC,r=e.collection,i=e.dataClass,a=e.collectionUri;t.call(this,{wakJSC:n}),this.collection=r,this.dataClass=i,this.collectionUri=a,this.isEntitySet=o.isEntitySetUri(a)}return r(e,t),e.prototype.fetch=function(t){var e=this;return o.CollectionBaseService.fetch({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,options:t}).then(function(t){return t.__ENTITYSET&&(e.collectionUri=t.__ENTITYSET,e.isEntitySet=o.isEntitySetUri(t.__ENTITYSET)),t})},e.prototype.callMethod=function(t,e){return o.CollectionBaseService.callMethod({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,methodName:t,parameters:e})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a},function(t,e,n){"use strict";function r(t){return/^\/rest\/\w+\/\$entityset\/[A-Z0-9]+(\?.*)?$/i.test(t)}var i=n(100),o=function(){function t(){}return t.fetch=function(t){var e=t.httpClient,n=t.collectionUri,r=t.isEntitySet,o=t.options;if(!r&&o.select&&o.select.length>0)throw new Error("Collection.fetch: option select is not allowed when collection is deferred");o.method="subentityset";var a=i["default"].handleOptions(o);r||(a="&"+a.slice(1));var s=this._removeRestFromUri(n);return e.get({uri:s+a}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var n=0,r=e.__ENTITIES;n<r.length;n++){var o=r[n];i["default"].removeRestInfoFromEntity(o)}return e})},t.callMethod=function(t){var e=t.httpClient,n=t.collectionUri,r=t.isEntitySet,o=t.methodName,a=t.parameters,s=this._removeRestFromUri(n);if(r)s+="/"+o;else{var u=i["default"].handleOptions({method:"subentityset",emMethod:o});s+="&"+u.slice(1)}return e.post({uri:s,data:a}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t._removeRestFromUri=function(t){return t.slice(5)},t}();e.CollectionBaseService=o,e.isEntitySetUri=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={DEFAULT_PAGE_SIZE:40,DEFAULT_SESSION_DURATION:3600}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(90),o=n(110),a=function(t){function e(e){var n=e.wakJSC,r=e.media,i=e.dataClassBusiness,a=e.isImage,s=e.attributeName,u=e.entity;t.call(this,{wakJSC:n}),this.media=r,this.entity=u,this.dataClassBusiness=i,this.isImage=a===!0,this.service=new o["default"]({wakJSC:n,mediaBusiness:this,media:r,attributeName:s,dataClassBusiness:i})}return r(e,t),e.prototype._decorateMedia=function(){this.media.upload=this.upload.bind(this),this.media["delete"]=this["delete"].bind(this)},e.prototype.upload=function(t){var e=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before uploading a media");return this.service.upload(t,t.type).then(function(t){return t}).then(function(){return e.entity.fetch()})},e.prototype["delete"]=function(){var t=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before deleting a media");return this.service["delete"]().then(function(){return t.entity.fetch()})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(92),o=n(111),a=function(t){function e(e){var n=e.wakJSC,r=e.mediaBusiness,i=e.media,o=e.attributeName,a=e.dataClassBusiness;t.call(this,{wakJSC:n}),this.dataClassName=a.dataClass.name,this.entity=r.entity,this.isImage=r.isImage,this.media=i,this.attributeName=o}return r(e,t),e.prototype.upload=function(t,e){return o.MediaBaseService.upload({httpClient:this.httpClient,dataClassName:this.dataClassName,entityKey:this.entity._key,attributeName:this.attributeName,isImage:this.isImage,file:t})},e.prototype["delete"]=function(){return o.MediaBaseService["delete"]({httpClient:this.httpClient,dataClassName:this.dataClassName,entityKey:this.entity._key,entityStamp:this.entity._stamp,attributeName:this.attributeName})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a},function(t,e){"use strict";var n=function(){function t(){}return t.upload=function(t){var e=t.httpClient,n=t.dataClassName,r=t.entityKey,i=t.attributeName,o=t.file,a=t.isImage,s=this._buildUri(n,r,i);return a&&(s+="?$rawPict="+o.type),e.post({uri:s,data:o,binary:!0})},t["delete"]=function(t){var e=t.httpClient,n=t.dataClassName,r=t.entityKey,i=t.entityStamp,o=t.attributeName,a="/"+n+"("+r+")",s={__KEY:r,__STAMP:i};return s[o]=null,e.post({uri:a,data:s})},t._buildUri=function(t,e,n){return"/"+t+"("+e+")/"+n},t}();e.MediaBaseService=n},function(t,e){"use strict";var n=function(){function t(t){var e=t.deferred,n=t.dataClass;this.entities=[],this._deferred=e===!0,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:n})}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";var n=function(){function t(t){var e=t.uri;this.uri=e}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(90),o=n(115),a=n(108),s=function(t){function e(e){var n=e.wakJSC;t.call(this,{wakJSC:n}),this.service=new o["default"]({wakJSC:n})}return r(e,t),e.prototype.login=function(t,e,n){var r=n||a["default"].DEFAULT_SESSION_DURATION;if("number"!=typeof r||r<=0)throw new Error("Directory.login: invalid duration parameter");return this.service.login(t,e,r)["catch"](function(){return Promise.reject(new Error("Directory.login: Unauthorized"))})},e.prototype.logout=function(){return this.service.logout()["catch"](function(){return Promise.reject(new Error("Directory.logout: logout failed"))})},e.prototype.currentUser=function(){return this.service.currentUser().then(function(t){return t})["catch"](function(){return Promise.reject(new Error("Directory.currentUser: user is not logged in"))})},e.prototype.currentUserBelongsTo=function(t){if("string"!=typeof t)throw new Error("Directory.currentUserBelongsTo: group must be a string");return this.service.currentUserBelongsTo(t).then(function(){return!0})["catch"](function(){return!1})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(92),o=n(116),a=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.login=function(t,e,n){return o.DirectoryBaseService.login({httpClient:this.httpClient,username:t,password:e,duration:n})},e.prototype.logout=function(){return o.DirectoryBaseService.logout({httpClient:this.httpClient})},e.prototype.currentUser=function(){return o.DirectoryBaseService.currentUser({httpClient:this.httpClient})},e.prototype.currentUserBelongsTo=function(t){return o.DirectoryBaseService.currentUserBelongsTo({httpClient:this.httpClient,group:t})},e}(i["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a},function(t,e){"use strict";var n=function(){function t(){}return t.login=function(t){var e=t.httpClient,n=t.username,r=t.password,i=t.duration;return e.post({uri:"/$directory/login",data:[n,r,i]}).then(function(){return!0})},t.logout=function(t){var e=t.httpClient;return e.get({uri:"/$directory/logout"}).then(function(t){var e=JSON.parse(t.body);return!(!e.result||e.result!==!0)||Promise.reject(new Error)})},t.currentUser=function(t){var e=t.httpClient;return e.get({uri:"/$directory/currentUser"}).then(function(t){var e=JSON.parse(t.body);return e.result&&e.result.ID?e.result:Promise.reject(new Error)})},t.currentUserBelongsTo=function(t){var e=t.httpClient,n=t.group;return e.post({uri:"/$directory/currentUserBelongsTo",data:[n]}).then(function(t){var e=JSON.parse(t.body);return!(!e||!e.result||e.result!==!0)||Promise.reject(new Error)})},t}();e.DirectoryBaseService=n},function(t,e){t.exports={name:"wakanda-client",main:"dist/wakanda-client.node.js",version:"0.3.6",description:"Wakanda Client allows you to easily interact with Wakanda Server on a JavaScript (browser or node) environment",typings:"dist/wakanda-client.d.ts",browser:"dist/wakanda-client.min.js",repository:"wakanda/wakanda-javascript-client",scripts:{"webpack-watch":"node ./node_modules/webpack/bin/webpack.js --progress --colors --watch","webpack-build":"node ./node_modules/webpack/bin/webpack.js --progress --colors","webpack-build:ci":"node ./node_modules/webpack/bin/webpack.js --progress --colors --config webpack.ci.js","webpack-build:prod":"node ./node_modules/webpack/bin/webpack.js --progress --colors --config webpack.prod.js","test:karma:single":"node ./node_modules/karma/bin/karma start","test:karma:full":"npm run webpack-build && npm run test:karma:single","test:node:single":'http_proxy="" node ./node_modules/mocha/bin/mocha test/bootstrap.js test/spec/**/*.spec.js',"test:node:full":"npm run webpack-build && npm run test:node:single","test-single":"./test.sh single",test:"./test.sh","test-server:start":"node test/connect/server.js & echo $! > testserver.pid && sleep 1","test-server:stop":"kill `cat testserver.pid` && rm testserver.pid","test-server:record":"node test/connect/server.js record & echo $! > testserver.pid","test-server:init":"rm -rf test/connect/mocks && npm run test-server:record && npm run webpack-build && npm run test:node:single && npm run test:karma:single && npm run test-server:stop",codecov:"cat coverage/*/lcov.info | codecov",tsc:"node ./node_modules/typescript/bin/tsc",serve:'node ./node_modules/.bin/concurrently -r "npm run webpack-watch" "node ./node_modules/.bin/gulp serve"'},author:"Wakanda SAS",license:"MIT",devDependencies:{"babel-core":"^6.3.17","babel-loader":"^6.2.0","babel-polyfill":"^6.3.14","babel-preset-es2015":"^6.3.13","body-parser":"^1.14.2",chai:"^3.4.1",chalk:"^1.1.1","codecov.io":"^0.1.6",concurrently:"^2.0.0",connect:"^3.4.0","connect-prism":"mrblackus/connect-prism",eslint:"^1.10.3","eslint-loader":"^1.2.0",express:"^4.13.3",grunt:"^0.4.5",gulp:"^3.9.0","gulp-connect":"^2.2.0","http-proxy-middleware":"^0.9.0",isparta:"^4.0.0","isparta-loader":"^2.0.0","json-loader":"^0.5.4",karma:"^0.13.15","karma-chai":"^0.1.0","karma-coverage":"^0.5.3","karma-mocha":"^0.2.1","karma-phantomjs-launcher":"^0.2.1","karma-verbose-reporter":"0.0.3",mocha:"^2.3.4",path:"^0.12.7",phantomjs:"^1.9.19","serve-static":"^1.10.2","ts-loader":"0.8.1",tslint:"^3.9.0","tslint-loader":"^2.1.4",typescript:"^1.8.10",webpack:"^1.12.15"},dependencies:{"core-js":"^2.1.2",request:"^2.67.0"}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(119),o=n(120),a=n(121).HttpClient,s=function(t){function e(e){var n=e.apiPrefix;t.call(this,{apiPrefix:n}),this.client=new a}return r(e,t),e.prototype.get=function(e){var n=e.uri,r=e.params;try{var i=t.prototype.get.call(this,{uri:n,params:r});if(null!==i)return Promise.resolve(i)}catch(o){return Promise.reject(o)}var a=this._getWithoutInterceptor({uri:n,params:r});return t.prototype.responseGet.call(this,n,a)},e.prototype._getWithoutInterceptor=function(t){var e=t.uri,n=this.client.createRequest(this.prefix+e).asGet().withCredentials(!0).send();return this._httpResponseAdaptor({request:n})},e.prototype.post=function(e){var n=e.uri,r=e.data,i=e.binary;try{var o=t.prototype.post.call(this,{uri:n,data:r,binary:i});if(null!==o)return Promise.resolve(o)}catch(a){return Promise.reject(a)}var s=this.client.createRequest(this.prefix+n).asPost().withContent(r).withCredentials(!0).send(),u=this._httpResponseAdaptor({request:s});return t.prototype.responsePost.call(this,n,u)},e.prototype._httpResponseAdaptor=function(t){var e=t.request;return e.then(function(t){return new o["default"]({statusCode:t.statusCode,headers:[],body:t.response})})},e}(i.HttpClient);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e){"use strict";var n=function(){function t(t){var e=t.apiPrefix;this.prefix=e,this._getRequestInterceptors=[],this._postRequestInterceptors=[],this._getResponseInterceptors=[],this._postResponseInterceptors=[]}return t.prototype.get=function(t){for(var e=0;e<this._getRequestInterceptors.length;e++){var n=this._getRequestInterceptors[e],r=n(t);if(null!==r&&"undefined"!=typeof r)return r}return null},t.prototype.post=function(t){for(var e=0;e<this._postRequestInterceptors.length;e++){var n=this._postRequestInterceptors[e],r=n(t);if(null!==r&&"undefined"!=typeof r)return r}return null},t.prototype.responseGet=function(t,e){for(var n=0,r=this._getResponseInterceptors;n<r.length;n++){var i=r[n],o=i(t,e);if(o)return o}return e},t.prototype.responsePost=function(t,e){for(var n=0,r=this._postResponseInterceptors;n<r.length;n++){var i=r[n],o=i(t,e);if(o)return o}return e},t.prototype.registerRequestInterceptor=function(t,e){var n=this,r=this._interceptorTypeToArray(t);r.forEach(function(t){"get"===t?n._getRequestInterceptors.push(e):"post"===t&&n._postRequestInterceptors.push(e)})},t.prototype.registerResponseInterceptor=function(t,e){var n=this,r=this._interceptorTypeToArray(t);r.forEach(function(t){"get"===t?n._getResponseInterceptors.push(e):"post"===t&&n._postResponseInterceptors.push(e)})},t.prototype._interceptorTypeToArray=function(t){var e=this,n=[];if("string"==typeof t){if(!this._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");n.push(t.toLowerCase())}else{if(!Array.isArray(t))throw new Error("HttpClient.registerInterceptor: type must be a string or an array");t.forEach(function(t){if(!e._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");n.push(t.toLowerCase())})}return n},t.prototype._isValidInterceptorType=function(t){var e=["get","post"];return e.indexOf(t)!==-1},t}();e.HttpClient=n,Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";var n=function(){function t(t){var e=t.statusCode,n=t.headers,r=t.body;this.statusCode=e,this.headers=n||[],this.body=r}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(122);Object.defineProperty(e,"HttpClient",{enumerable:!0,get:function(){return r.HttpClient}});var i=n(126);Object.defineProperty(e,"HttpRequestMessage",{enumerable:!0,get:function(){return i.HttpRequestMessage}});var o=n(128);Object.defineProperty(e,"HttpResponseMessage",{enumerable:!0,get:function(){return o.HttpResponseMessage}});var a=n(130);Object.defineProperty(e,"JSONPRequestMessage",{enumerable:!0,get:function(){return a.JSONPRequestMessage}});var s=n(123);Object.defineProperty(e,"Headers",{enumerable:!0,get:function(){return s.Headers}});var u=n(124);Object.defineProperty(e,"RequestBuilder",{enumerable:!0,get:function(){return u.RequestBuilder}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){t.pendingRequests.push(e),t.isRequesting=!0}function o(t,e){var n=t.pendingRequests.indexOf(e);if(t.pendingRequests.splice(n,1),t.isRequesting=t.pendingRequests.length>0,!t.isRequesting){var r=new window.CustomEvent("aurelia-http-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout(function(){return document.dispatchEvent(r)},1)}}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpClient=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=(n(123),n(124)),u=n(126),c=n(130);e.HttpClient=function(){function t(){r(this,t),this.requestTransformers=[],this.requestProcessorFactories=new Map,this.requestProcessorFactories.set(u.HttpRequestMessage,u.createHttpRequestMessageProcessor),this.requestProcessorFactories.set(c.JSONPRequestMessage,c.createJSONPRequestMessageProcessor),this.pendingRequests=[],this.isRequesting=!1}return a(t,[{key:"configure",value:function(t){var e=new s.RequestBuilder(this);return t(e),this.requestTransformers=e.transformers,this}},{key:"createRequest",value:function(t){var e=new s.RequestBuilder(this);return t&&e.withUri(t),e}},{key:"send",value:function(t,e){var n,r,a,s,u=this,c=this.requestProcessorFactories.get(t.constructor);if(!c)throw new Error("No request message processor factory for "+t.constructor+".");for(n=c(),i(this,n),e=e||this.requestTransformers,a=0,s=e.length;a<s;++a)e[a](this,n,t);return r=n.process(this,t),r.abort=r.cancel=function(){n.abort()},r.then(function(t){return o(u,n),t})["catch"](function(t){throw o(u,n),t})}},{key:"delete",value:function(t){return this.createRequest(t).asDelete().send()}},{key:"get",value:function(t){return this.createRequest(t).asGet().send()}},{key:"head",value:function(t){return this.createRequest(t).asHead().send();
}},{key:"jsonp",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"jsoncallback":arguments[1];return this.createRequest(t).asJsonp(e).send()}},{key:"options",value:function(t){return this.createRequest(t).asOptions().send()}},{key:"put",value:function(t,e){return this.createRequest(t).asPut().withContent(e).send()}},{key:"patch",value:function(t,e){return this.createRequest(t).asPatch().withContent(e).send()}},{key:"post",value:function(t,e){return this.createRequest(t).asPost().withContent(e).send()}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Headers=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,t),this.headers=e}return r(t,[{key:"add",value:function(t,e){this.headers[t]=e}},{key:"get",value:function(t){return this.headers[t]}},{key:"clear",value:function(){this.headers={}}},{key:"configureXHR",value:function(t){var e,n=this.headers;for(e in n)t.setRequestHeader(e,n[e])}}],[{key:"parse",value:function(e){var n=new t;if(!e)return n;for(var r=e.split("\r\n"),i=0;i<r.length;i++){var o=r[i],a=o.indexOf(": ");if(a>0){var s=o.substring(0,a),u=o.substring(a+2);n.add(s,u)}}return n}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.RequestBuilder=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=(n(125),n(126)),a=n(130),s=e.RequestBuilder=function(){function t(e){r(this,t),this.client=e,this.transformers=e.requestTransformers.slice(0),this.useJsonp=!1}return i(t,[{key:"send",value:function(){var t=this.useJsonp?new a.JSONPRequestMessage:new o.HttpRequestMessage;return this.client.send(t,this.transformers)}}],[{key:"addHelper",value:function(e,n){t.prototype[e]=function(){return this.transformers.push(n.apply(this,arguments)),this}}}]),t}();s.addHelper("asDelete",function(){return function(t,e,n){n.method="DELETE"}}),s.addHelper("asGet",function(){return function(t,e,n){n.method="GET"}}),s.addHelper("asHead",function(){return function(t,e,n){n.method="HEAD"}}),s.addHelper("asOptions",function(){return function(t,e,n){n.method="OPTIONS"}}),s.addHelper("asPatch",function(){return function(t,e,n){n.method="PATCH"}}),s.addHelper("asPost",function(){return function(t,e,n){n.method="POST"}}),s.addHelper("asPut",function(){return function(t,e,n){n.method="PUT"}}),s.addHelper("asJsonp",function(t){return this.useJsonp=!0,function(e,n,r){r.callbackParameterName=t}}),s.addHelper("withUri",function(t){return function(e,n,r){r.uri=t}}),s.addHelper("withContent",function(t){return function(e,n,r){r.content=t}}),s.addHelper("withBaseUri",function(t){return function(e,n,r){r.baseUri=t}}),s.addHelper("withParams",function(t){return function(e,n,r){r.params=t}}),s.addHelper("withResponseType",function(t){return function(e,n,r){r.responseType=t}}),s.addHelper("withTimeout",function(t){return function(e,n,r){r.timeout=t}}),s.addHelper("withHeader",function(t,e){return function(n,r,i){i.headers.add(t,e)}}),s.addHelper("withCredentials",function(t){return function(e,n,r){r.withCredentials=t}}),s.addHelper("withReviver",function(t){return function(e,n,r){r.reviver=t}}),s.addHelper("withReplacer",function(t){return function(e,n,r){r.replacer=t}}),s.addHelper("withProgressCallback",function(t){return function(e,n,r){r.progressCallback=t}}),s.addHelper("withCallbackParameterName",function(t){return function(e,n,r){r.callbackParameterName=t}})},function(t,e){"use strict";function n(t){var e,n;for(e=0;e<t.length;++e)if(n=t[e],"."===n)t.splice(e,1),e-=1;else if(".."===n){if(0===e||1==e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}function r(t,e){var r,i=e&&e.split("/");return t=t.trim(),t=t.split("/"),"."===t[0].charAt(0)&&i&&(r=i.slice(0,i.length-1),t=r.concat(t)),n(t),t.join("/")}function i(t,e){var n,r,i,o,a,s;if(!t)return e;if(!e)return t;for(s=0===t.indexOf("//")?"//":0===t.indexOf("/")?"/":"",n=t.split("/"),r=e.split("/"),i=[],o=0,a=n.length;o<a;++o)if(".."==n[o])i.pop();else{if("."==n[o]||""==n[o])continue;i.push(n[o])}for(o=0,a=r.length;o<a;++o)if(".."==r[o])i.pop();else{if("."==r[o]||""==r[o])continue;i.push(r[o])}return s+i.join("/").replace(/\:\//g,"://")}function o(t){return null==t?t+"":"object"===("undefined"==typeof t?"undefined":u(t))||"function"==typeof t?f[toString.call(t)]||"object":"undefined"==typeof t?"undefined":u(t)}function a(t,e){var n,r=[],i=function(t,e){e="function"==typeof e?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};for(n in t)s(n,t[n],e,i);return r.join("&").replace(c,"+")}function s(t,e,n,r){var i;if(Array.isArray(e))e.forEach(function(e,i){n||l.test(t)?r(t,e):s(t+"["+("object"===("undefined"==typeof e?"undefined":u(e))?i:"")+"]",e,n,r)});else if(n||"object"!==o(e))r(t,e);else for(i in e)s(t+"["+i+"]",e[i],n,r)}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.relativeToFile=r,e.join=i,e.buildQueryString=a;var c=/%20/g,l=/\[\]$/,f={};"Boolean Number String Function Array Date RegExp Object Error".split(" ").forEach(function(t,e){f["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){return new a.RequestMessageProcessor(XMLHttpRequest,[s.timeoutTransformer,s.credentialsTransformer,s.progressTransformer,s.responseTypeTransformer,s.headerTransformer,s.contentTransformer])}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpRequestMessage=void 0,e.createHttpRequestMessageProcessor=i;var o=n(123),a=n(127),s=n(129);e.HttpRequestMessage=function u(t,e,n,i){r(this,u),this.method=t,this.uri=e,this.content=n,this.headers=i||new o.Headers,this.responseType="json"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e,n=(0,s.join)(t.baseUri,t.uri);t.params&&(e=(0,s.buildQueryString)(t.params),n=e?n+"?"+e:n),t.fullUri=n}Object.defineProperty(e,"__esModule",{value:!0}),e.RequestMessageProcessor=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(128),s=n(125);e.RequestMessageProcessor=function(){function t(e,n){r(this,t),this.XHRType=e,this.transformers=n}return o(t,[{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"process",value:function(t,e){var n=this;return new Promise(function(r,o){var s,u,c=n.xhr=new n.XHRType,l=n.transformers;for(i(e),c.open(e.method,e.fullUri,!0),s=0,u=l.length;s<u;++s)l[s](t,n,e,c);c.onload=function(t){var n=new a.HttpResponseMessage(e,c,e.responseType,e.reviver);n.isSuccess?r(n):o(n)},c.ontimeout=function(t){o(new a.HttpResponseMessage(e,{response:t,status:c.status,statusText:c.statusText},"timeout"))},c.onerror=function(t){o(new a.HttpResponseMessage(e,{response:t,status:c.status,statusText:c.statusText},"error"))},c.onabort=function(t){o(new a.HttpResponseMessage(e,{response:t,status:c.status,statusText:c.statusText},"abort"))},c.send(e.content)})}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpResponseMessage=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(123);e.HttpResponseMessage=function(){function t(e,n,i,a){r(this,t),this.requestMessage=e,this.statusCode=n.status,this.response=n.response,this.isSuccess=n.status>=200&&n.status<400,this.statusText=n.statusText,this.responseType=i,this.reviver=a,n.getAllResponseHeaders?this.headers=o.Headers.parse(n.getAllResponseHeaders()):this.headers=new o.Headers}return i(t,[{key:"content",get:function(){try{return void 0!==this._content?this._content:void 0===this.response||null===this.response?this._content=this.response:"json"===this.responseType?this._content=JSON.parse(this.response,this.reviver):this.reviver?this._content=this.reviver(this.response):this._content=this.response}catch(t){if(this.isSuccess)throw t;return this._content=null}}}]),t}()},function(t,e){"use strict";function n(t,e,n,r){void 0!==n.timeout&&(r.timeout=n.timeout)}function r(t,e,n,r){void 0!==n.callbackParameterName&&(r.callbackParameterName=n.callbackParameterName)}function i(t,e,n,r){void 0!==n.withCredentials&&(r.withCredentials=n.withCredentials)}function o(t,e,n,r){n.progressCallback&&(r.upload.onprogress=n.progressCallback)}function a(t,e,n,r){var i=n.responseType;"json"===i&&(i="text"),r.responseType=i}function s(t,e,n,r){n.headers.configureXHR(r)}function u(t,e,n,r){window.FormData&&n.content instanceof FormData||window.Blob&&n.content instanceof Blob||window.ArrayBufferView&&n.content instanceof ArrayBufferView||n.content instanceof Document||"string"!=typeof n.content&&null!==n.content&&void 0!==n.content&&(n.content=JSON.stringify(n.content,n.replacer))}Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutTransformer=n,e.callbackParameterNameTransformer=r,e.credentialsTransformer=i,e.progressTransformer=o,e.responseTypeTransformer=a,e.headerTransformer=s,e.contentTransformer=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){return new s.RequestMessageProcessor(c,[u.timeoutTransformer,u.callbackParameterNameTransformer])}Object.defineProperty(e,"__esModule",{value:!0}),e.JSONPRequestMessage=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.createJSONPRequestMessageProcessor=i;var a=n(123),s=n(127),u=n(129),c=(e.JSONPRequestMessage=function l(t,e){r(this,l),this.method="JSONP",this.uri=t,this.content=void 0,this.headers=new a.Headers,this.responseType="jsonp",this.callbackParameterName=e},function(){function t(){r(this,t)}return o(t,[{key:"open",value:function(t,e){this.method=t,this.uri=e,this.callbackName="jsonp_callback_"+Math.round(1e5*Math.random())}},{key:"send",value:function(){var t=this,e=this.uri+(this.uri.indexOf("?")>=0?"&":"?")+this.callbackParameterName+"="+this.callbackName;window[this.callbackName]=function(e){delete window[t.callbackName],document.body.removeChild(n),void 0===t.status&&(t.status=200,t.statusText="OK",t.response=e,t.onload(t))};var n=document.createElement("script");n.src=e,document.body.appendChild(n),void 0!==this.timeout&&setTimeout(function(){void 0===t.status&&(t.status=0,t.ontimeout(new Error("timeout")))},this.timeout)}},{key:"abort",value:function(){void 0===this.status&&(this.status=0,this.onabort(new Error("abort")))}},{key:"setRequestHeader",value:function(){}}]),t}())}])});var wakanda=angular.module("wakanda",[]);wakanda.constant("wakandaClient",new WakandaClient.WakandaClient),wakanda.factory("$wakanda",["datastoreFactory","directoryFactory","transformFactory",function(t,e,n){var r={};return r.init=t.init,r.getDatastore=t.getDataStore,Object.defineProperty(r,"$ds",{get:r.getDatastore,enumerable:!0}),r.$login=e.login,r.$loginByPassword=e.login,r.$logout=e.logout,r.$currentUser=e.currentUser,r.$currentUserBelongsTo=e.currentUserBelongsTo,r.$transform={$objectToEntity:n.toEntity,$objectToCollection:n.toCollection},r}]),wakanda.provider("$wakandaConfig",["wakandaClient",function(t){var e="";this.$get=function(){return{getHostname:function(){return e}}},this.setHostname=function(n){t._httpClient.prefix=n+"/rest",e=n}}]);var wakanda=angular.module("wakanda");wakanda.factory("collectionFactory",["$injector","$q","rootScopeSafeApply","wakandaClient",function(t,e,n,r){function i(t,e){Object.defineProperty(t,"$_collection",{enumerable:!1,configurable:!1,writable:!0,value:null}),Object.defineProperty(t,"$_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:e}),Object.defineProperty(t,"$totalCount",{enumerable:!0,configurable:!1,get:function(){return t.$_collection._count}}),Object.defineProperty(t,"$queryParams",{enumerable:!0,configurable:!1,get:function(){return{pageSize:t.$_collection._pageSize,start:t.$_collection._first}}}),t.$fetch=o,t.$nextPage=s,t.$prevPage=u,t.$toJSON=c,t.$more=a,l(t,e)}function o(t){var r=t||{};if(r.orderBy)throw new Error("orderBy can't be change on a $fetch (query collection's cached on server side)");if(r.select)throw new Error("select can't be change on a $fetch (query collection's cached on server side)");var i=e.defer(),o=i.promise;return this.$_collection.fetch(t).then(function(t){n(function(){f(this),p(this,this.$_collection.entities),i.resolve({result:this})}.bind(this))}.bind(this))["catch"](function(t){n(function(){i.reject(t)})}),o.$promise=o,o}function a(){var t=e.defer(),r=t.promise;return this.$_collection.more().then(function(e){n(function(){f(this),p(this,this.$_collection.entities),t.resolve({result:this})}.bind(this))}.bind(this))["catch"](function(e){n(function(){t.reject(e)})}),r.$promise=r,r}function s(){var t=e.defer(),r=t.promise;return this.$_collection.nextPage().then(function(e){n(function(){f(this),p(this,this.$_collection.entities),t.resolve({result:this})}.bind(this))}.bind(this))["catch"](function(e){n(function(){t.reject(e)})}),r.$promise=r,r}function u(){var t=e.defer(),r=t.promise;return this.$_collection.prevPage().then(function(e){n(function(){f(this),p(this,this.$_collection.entities),t.resolve({result:this})}.bind(this))}.bind(this))["catch"](function(e){n(function(){t.reject(e)})}),r.$promise=r,r}function c(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return JSON.stringify(t)}function l(i,o){o.$_dataClass.methods.collection.forEach(function(o){i[o]=function(){var a=arguments,s=e.defer(),u=s.promise;return i.$_collection[o].apply(i.$_collection,a).then(function(e){n(function(){var n=e;if(r.helper.isEntity(e)){var o=i.$_dataClass.$_catalog[e._dataClass.name];if(o){var a=t.get("entityFactory");n=a.createNgEntity(o),n.$_entity=e}}else if(r.helper.isCollection(e)){var o=i.$_dataClass.$_catalog[e._dataClass.name];o&&(n=d.createNgCollection(o),n.$_collection=e,d.addEntities(n,e.entities))}s.resolve({result:n})})})["catch"](function(t){n(function(){s.reject(t)})}),u.$promise=u,u}})}function f(t){for(var e=0;e<t.length;e++)delete t[e];t.length=0}function p(e,n){for(var r=t.get("entityFactory"),i=0;i<n.length;i++){var o=r.createNgEntity(e.$_dataClass);o.$_entity=n[i],e.push(o)}}var d={};return d.isNgCollection=function(t){var e="object"==typeof t&&"function"==typeof t.$fetch&&"function"==typeof t.$more&&"function"==typeof t.$prevPage&&"function"==typeof t.$nextPage&&"function"==typeof t.$toJSON;return e},d.emptyNgCollection=f,d.addEntities=p,d.createNgCollection=function(t){var e=[];return i(e,t),e},d}]);var wakanda=angular.module("wakanda");wakanda.factory("dataclassFactory",["$q","entityFactory","collectionFactory","rootScopeSafeApply","wakandaClient",function(t,e,n,r,i){function o(t,e){Object.defineProperty(this,"$_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:t}),Object.defineProperty(this,"$_catalog",{enumerable:!1,configurable:!1,writable:!1,value:e}),this.$name=t.name,this.$collectionName=t.collectionName,l(this)}function a(n,i){var o=e.createNgEntity(this),a=t.defer(),s=a.promise;return this.$_dataClass.find(n,i).then(function(t){r(function(){o.$_entity=t,a.resolve({result:o})})})["catch"](function(t){r(function(){a.reject(t)})}),o.$promise=s,o}function s(t){var n={};if(t&&"object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&e.isNgEntity(t[r])&&(n[r]=t[r],delete t[r]);var i=this.$_dataClass.create(t),o=e.createNgEntity(this);o.$_entity=i;for(var r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);return o}function u(e){var i=n.createNgCollection(this),o=t.defer(),a=o.promise;return this.$_dataClass.query(e).then(function(t){r(function(){i.$_collection=t,n.addEntities(i,t.entities),o.resolve({result:i})})})["catch"](function(t){r(function(){o.reject(t)})}),i.$promise=a,i}function c(t){var e=t||{};return(e.filter||e.params)&&console.warn("params and filter parameters on options object are not allowed on calling $all() method. They will be ignored"),e.filter=null,e.params=null,this.$query(e)}function l(o){o.$_dataClass.methods.dataClass.forEach(function(a){o[a]=function(){var s=t.defer(),u=s.promise,c=arguments;return o.$_dataClass[a].apply(o.$_dataClass,c).then(function(t){r(function(){var r=t;if(i.helper.isEntity(t)){var a=o.$_catalog[t._dataClass.name];a&&(r=e.createNgEntity(a),r.$_entity=t)}else if(i.helper.isCollection(t)){var a=o.$_catalog[t._dataClass.name];a&&(r=n.createNgCollection(a),r.$_collection=t,n.addEntities(r,t.entities))}s.resolve({result:r})})})["catch"](function(t){r(function(){s.reject(t)})}),u.$promise=u,u}})}function f(t){var e=this.$_dataClass.attributes;if(t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null}for(var r={},n=0;n<e.length;n++)r[e[n].name]=e[n];return r}function p(){return y(this,"collection")}function d(){return y(this,"entity")}function h(){return y(this,"dataClass")}function y(t,e){return t.$_dataClass.methods[e]}var v={};return o.prototype.$find=a,o.prototype.$create=s,o.prototype.$query=u,o.prototype.$all=c,o.prototype.$attr=f,o.prototype.$entityMethods=d,o.prototype.$collectionMethods=p,o.prototype.$dataClassMethods=h,v.createNgDataClass=function(t,e){return new o(t,e)},v}]);var wakanda=angular.module("wakanda");wakanda.factory("datastoreFactory",["$q","dataclassFactory","wakandaClient",function(t,e,n){function r(t){return JSON.stringify(t||"*")}var i={},o=null,a={};return i.init=function(i){var s,u;s="string"!=typeof i||"*"===i||""===i?void 0:i.split(",");var c=a[r(s)];return c?(deferred=t.defer(),deferred.resolve(c),u=deferred.promise):u=n.getCatalog(s).then(function(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=e.createNgDataClass(t[i],n));return o||(o=n),a[r(s)]=n,n}),u.$promise=u,u},i.getDataStore=function(){if(console.warn("$wakanda.getDataStore() and $wakanda.$ds are deprecated. Use $wakanda.init() instead."),!o)throw new Error("The Datastore isn't initialized please execute $wakanda.init(catalog) before you run your app.");return o},i}]);var wakanda=angular.module("wakanda");wakanda.factory("directoryFactory",["$q","rootScopeSafeApply","wakandaClient",function(t,e,n){var r={};return r.login=function(r,i){var o=t.defer(),a=o.promise;return n.directory.login(r,i).then(function(t){e(function(){o.resolve({result:t})})})["catch"](function(t){e(function(){o.resolve({result:!1})})}),a.$promise=a,a},r.logout=function(){var r=t.defer(),i=r.promise;return n.directory.logout().then(function(t){e(function(){r.resolve({result:t})})})["catch"](function(t){e(function(){r.reject(t)})}),i.$promise=i,i},r.currentUser=function(){var r=t.defer(),i=r.promise;return n.directory.currentUser().then(function(t){e(function(){r.resolve({result:t})})})["catch"](function(){e(function(){r.resolve({result:null})})}),i.$promise=i,i},r.currentUserBelongsTo=function(r){var i=t.defer(),o=i.promise;return n.directory.currentUserBelongsTo(r||"").then(function(t){e(function(){i.resolve({result:t})})})["catch"](function(t){e(function(){i.reject(t)})}),o.$promise=o,o},r}]);var wakanda=angular.module("wakanda");wakanda.factory("entityFactory",["$injector","$q","mediaFactory","rootScopeSafeApply","wakandaClient",function(t,e,n,r,i){function o(t){Object.defineProperty(this,"$_entity",{enumerable:!1,configurable:!1,writable:!0,value:null}),Object.defineProperty(this,"$_relatedAttributes",{enumerable:!1,configurable:!1,writable:!0,value:{}}),Object.defineProperty(this,"$_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:t}),t.$_dataClass.attributes.forEach(function(t){"relatedEntity"===t.kind?v(this,t):"relatedEntities"===t.kind?m(this,t):"storage"!==t.kind||"image"!==t.type&&"blob"!==t.type?b(this,t):_(this,t)}.bind(this)),y(this,t)}function a(){if(this.$_entity)return this.$_entity._key}function s(){if(this.$_entity)return this.$_entity._stamp}function u(){return void 0===this.$_entity._key}function c(){return this.$_entity._deferred}function l(){var t=e.defer(),n=t.promise;return this.$_entity.save().then(function(e){r(function(){this.$_relatedAttributes={},t.resolve({result:this})}.bind(this))}.bind(this))["catch"](function(e){r(function(){t.reject(e)})}),n.$promise=n,n}function f(){var t=e.defer(),n=t.promise;return this.$_entity.recompute().then(function(){r(function(){this.$_relatedAttributes={},t.resolve({result:this})}.bind(this))}.bind(this))["catch"](function(e){r(function(){t.reject(e)})}),n.$promise=n,n}function p(){var t=e.defer(),n=t.promise;return this.$_entity["delete"]().then(function(e){r(function(){this.$_entity=null,t.resolve({result:e})}.bind(this))}.bind(this))["catch"](function(e){r(function(){t.reject(e)})}),n.$promise=n,n}function d(){if(!this.$_entity._key)throw new Error("$fetch error - no key nor pointer was found");var t=e.defer(),n=t.promise;return this.$_entity.fetch().then(function(){r(function(){t.resolve({result:this.$_entity})}.bind(this))}.bind(this))["catch"](function(e){r(function(){t.reject(e)})}),n.$promise=n,n}function h(){return JSON.stringify(this,function(t,e){if("$promise"!==t)return e})}function y(n,o){o.$_dataClass.methods.entity.forEach(function(a){n[a]=function(){var s=arguments,u=e.defer(),c=u.promise;return n.$_entity[a].apply(n.$_entity,s).then(function(e){r(function(){var n=e;if(i.helper.isEntity(e)){var r=o.$_catalog[e._dataClass.name];r&&(n=g.createNgEntity(r),n.$_entity=e)}else if(i.helper.isCollection(e)){var r=o.$_catalog[e._dataClass.name];if(r){var a=t.get("collectionFactory");n=a.createNgCollection(r),n.$_collection=e,a.addEntities(n,e.entities)}}u.resolve({result:n})})})["catch"](function(t){r(function(){u.reject(t)})}),c.$promise=c,c}})}function v(t,e){Object.defineProperty(t,e.name,{enumerable:!0,get:function(){if(!this.$_entity)return null;if(this.$_entity[e.name]){if(!t.$_relatedAttributes[e.name]){var n=t.$_dataClass.$_catalog[e.type],r=new o(n);r.$_entity=t.$_entity[e.name],t.$_relatedAttributes[e.name]=r}return t.$_relatedAttributes[e.name]}return null},set:function(n){if(!(n instanceof o)&&null!==n)throw new Error("Passed value must be an entity or null");r(function(){n?(t.$_relatedAttributes[e.name]=n,t.$_entity[e.name]=n.$_entity):(delete t.$_relatedAttributes[e.name],t.$_entity[e.name]=null)})}})}function m(e,n){Object.defineProperty(e,n.name,{enumerable:!0,get:function(){if(!this.$_entity)return null;if(this.$_entity[n.name]){if(!e.$_relatedAttributes[n.name]){var r=e.$_dataClass.$_catalog[n.entityType],i=t.get("collectionFactory"),o=i.createNgCollection(r);i.addEntities(o,this.$_entity[n.name].entities),o.$_collection=this.$_entity[n.name],e.$_relatedAttributes[n.name]=o}return e.$_relatedAttributes[n.name]}return null},set:function(){throw new Error("Can't set relatedEntities attribute "+n.name+".")}})}function _(t,e){Object.defineProperty(t,e.name,{enumerable:!0,get:function(){if(!this.$_entity)return null;if(!this.$_relatedAttributes[e.name]){var t=n.createNgMedia(this.$_entity[e.name]);this.$_relatedAttributes[e.name]=t}return this.$_relatedAttributes[e.name]},set:function(){throw new Error("Can't set media attribute "+e.name+".")}})}function b(t,e){Object.defineProperty(t,e.name,{enumerable:!0,get:function(){return this.$_entity?t.$_entity[e.name]||null:null},set:function(n){r(function(){t.$_entity[e.name]=n})}})}var g={};return o.prototype.$save=l,o.prototype.$remove=p,o.prototype.$fetch=d,o.prototype.$toJSON=h,o.prototype.$key=a,o.prototype.$stamp=s,o.prototype.$isNew=u,o.prototype.$isDeferred=c,o.prototype.$recompute=f,g.isNgEntity=function(t){return t instanceof o==!0},g.createNgEntity=function(t){return new o(t)},g}]),angular.module("wakanda").factory("$wakandaManager",["$wakanda","$q",function(t,e){var n={};return n.getDataStore=function(e){return t.init(e)},n.user={},n.currentUser=function(){return t.$currentUser().$promise.then(function(t){return t&&t.result?t.result:e.reject()})},n.currentUserBelongsTo=function(n){return t.$currentUserBelongsTo(n).then(function(t){return!(!t||t.result!==!0)||e.reject()})},n}]);var wakanda=angular.module("wakanda");wakanda.factory("mediaFactory",[function(){function t(t){Object.defineProperty(this,"$_media",{enumerable:!1,configurable:!1,writable:!1,value:t}),Object.defineProperty(this,"uri",{enumerable:!0,configurable:!1,get:function(){return this.$_media.uri},set:function(){throw new Error("Can't set media uri.")}})}function e(t){var e=this.$_media.upload(t,t.type).then(function(t){return{result:t}});return e.$promise=e,e}function n(){var t=this.$_media["delete"]().then(function(t){return{result:t}});return t.$promise=t,t}var r={};return t.prototype.$upload=e,t.prototype.$remove=n,r.createNgMedia=function(e){return new t(e)},r}]),angular.module("wakanda").service("rootScopeSafeApply",["$rootScope","$timeout",function(t,e){"use strict";var n=function(e){var n=t.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():t.$apply(e)};return n}]);var wakanda=angular.module("wakanda");wakanda.factory("transformFactory",["entityFactory","collectionFactory",function(t,e){var n={};return n.toEntity=function(e){if(console.warn("$transform.$objectToEntity is deprecated. This transformation is done automatically."),!t.isNgEntity(e))throw new Error("$transform.$objectToEntity: invalid object");return e},n.toCollection=function(t){if(console.warn("$transform.$objectToCollection is deprecated. This transformation is done automatically."),!e.isNgCollection(t))throw new Error("$transform.$objectToCollection: invalid object");return t},n}]);
//# sourceMappingURL=angular-wakanda.min.js.map
